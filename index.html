 
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Pruebas de API Buscar Personas</title>
 <style type="text/css">
	
	h2{
		color: #8BC34A;
		background-color: #50614f;
	}
	table{
		padding-top: 10px;
		border-style: none;
	}
	
	th{
		background: #8BC34A;
	}
	
	th{		
		border-top-color: transparent;
		border-right-color: transparent;
		border-bottom-color: darkgreen;
		border-left-color: transparent;
		
	}
	#thnombres{
	width: 350px;
	}
	td{		
		border-top-color: transparent;
		border-right-color: transparent;
		border-bottom-color: darkgreen;
		border-left-color: transparent;
		text-align: left;
		padding-left: 15px;
	}
	input{		
		font-size: 15px;
		color: #4CAF50;
	}
	
</style>
  </head>
  <body>
    <h2>Buscar Personas</h2>
	
    <input id="txtBusqueda" type="text" name="txtBusqueda" title="Aqui ingresar nombre o identificacion!!!">
    <input type="button" value ="Buscar 🔎" onclick="javascript:Buscar()">
    <input type="button" value ="Limpiar 🗑️" onclick="javascript:Limpiar()">
    
    <table border=1 id = "tbResultado">
    </table>                          
	
	
 </body>
</html>

<script>  
function Limpiar()
{
	document.getElementById('txtBusqueda').value  = "";
    document.getElementById('tbResultado').innerHTML = "";
}

function Buscar()
{
	//Validando
	if(document.getElementById('txtBusqueda').value.length < 1) 
	  return false;
	else
	{
		var txtValoraBuscar = document.getElementById('txtBusqueda').value;

		var settings = {
			"url": "https://portalapi.minsa.gob.ni/wsconsultasipai/v1/consulta/info/obtenerDatosPersonaVacuna",
			"method": "POST",
			"timeout": 0,
			"headers": {
				"Content-Type": "application/json"
			},
			"data": JSON.stringify({
				"identificacion": "",
				"primernombre": "DAVID",
				"segundonombre": "Rafael",
				"primerapellido": "RIVAS",
				"segundoapellido": "Sanchez"
			}),
			};

		$.ajax(settings).done(function (response) {
				console.log(response);
				
				var data = response;

				var Personas= JSON.parse(JSON.parse(data).Data);
				
				var tablaCabecerra = `<tr>                             
											<th>Identificacion</th>                   
											<th id="thnombres">Nombre Completo</th>               
										</tr>`;
				if(Personas.persona.length ==0) 
				{			
					tablaCabecerra = `<tr>                             
												<th>No hay datos compatibles con la busqueda!!!</th>  
											</tr>`;
				}
				

				document.getElementById('tbResultado').innerHTML = tablaCabecerra;
				for(x in Personas.persona)
				{		
					var htmlFila = "<tr>  <td>"+ Personas.persona[x].CodigoIdentificacion +"</td>  <td>"+ Personas.persona[x].NombreCompleto +"</td> </tr>";		
					document.getElementById('tbResultado').insertRow(-1).innerHTML = htmlFila;
				}
			});


	}	  

}

</script>
